var mp_basic_case_study=mp_basic.extend({setup:function(){this.playerId="page-media-"+$.randomString(6);var scope=this,$main=$$("div","","main-text"),l_title=this.data.heading?$$("h3").html(this.data.heading):"",l_title2=this.data.heading2?$$("h3").html(this.data.heading2):"",l_media=$.makeArray(this.data.assets.item||[]),l_mediaCount=l_media.length,$img=[],l_image={},l_csTabIndex=0;this.html.addClass(this.data.basic_type.replace(/_/g,"-"));switch(this.data.basic_type){case"text_only":this.html.append($main.append(l_title).append(this.data.main));break;case"columns":this.html.append($$("div","","left-column column").append(l_title).append(this.data.main)).append($$("div","","right-column column").append(l_title2).append(this.data.main2));break;case"image_inline":for(var i=0;i<l_mediaCount;i++){switch(l_media[i].type){case"mp_resource_image":l_image=l_media[i];break}}$img=$$("img").attr({id:this.playerId,"class":"page-media",src:"files/"+l_image.content,alt:l_image.alt_text,width:l_image.width,height:l_image.height});this.html.append($img).append($main.append(l_title).append(this.data.main));break;case"image_full_width":for(var i=0;i<l_mediaCount;i++){switch(l_media[i].type){case"mp_resource_image":l_image=l_media[i];break}}$img=$$("img").attr({id:this.playerId,"class":"page-media",src:"files/"+l_image.content,alt:l_image.alt_text,width:l_image.width,height:l_image.height});this.html.append($main.append($$("p").html($img)).append(l_title).append(this.data.main));break;case"video":case"audio":case"audio_image":this.html.append($main.append(l_title).append(this.data.main)).append($$("div",this.playerId,"page-media"));break}l_csTabIndex=_app.structure.parent(_app.structure.parent(this.data.id).id).id;_app.panels.case_study.$panel.find("#tab-content-"+l_csTabIndex).find(".tab-sub-content").html(this.html.wrapInner($$("div","","inner")));setTimeout(function(){scope.pageReady()},10)},resizePage:function(){},initiateMedia:function(){var l_media=$.makeArray(this.data.assets.item),l_mediaCount=l_media.length,l_video={},l_audio={},l_image={},$inner=_app.panels.case_study.$panel.find("#"+this.data.id+" > .inner");for(var i=0;i<l_mediaCount;i++){switch(l_media[i].type){case"mp_resource_video":l_video=l_media[i];break;case"mp_resource_audio":l_audio=l_media[i];break;case"mp_resource_image":l_image=l_media[i];break}}switch(this.data.basic_type){case"video":l_video.width=466;l_video.height=262;_app.setupVideoPlayer(this.playerId,l_video);l_dimensions={width:250,height:262};l_description=this.data.media_description||l_video.description||"";if(!empty(l_description)){$inner.append($$("div").html(l_description).transcript("right",l_dimensions,this.playerId))}break;case"audio":l_audio.width=466;_app.setupAudioPlayer(this.playerId,l_audio);l_dimensions={width:466,height:200};l_description=this.data.media_description||l_audio.description||"";if(!empty(l_description)){$inner.append($$("div").html(l_description).transcript("down",l_dimensions,this.playerId))}break;case"audio_image":if(empty(l_image))l_image=l_audio.image;l_audio.width=466;l_audio.height=262;_app.setupAudioPlayer(this.playerId,l_audio,l_image);l_dimensions={width:250,height:262};l_description=this.data.media_description||l_audio.description||"";if(!empty(l_description)){$inner.append($$("div").html(l_description).transcript("right",l_dimensions,this.playerId))}break}}});