var Panel=Class.extend({init:function(){this.opened=false;this.enabled=false;this.active="";this.$panels=$("#panels");this.$panel=this.$panels.find("#panel-"+this.id);this.$button=$("#btn-"+this.id);this.disable();this.speed=200;var scope=this;this.$button.click(function(p_event){if(scope.enabled){if(scope.opened){switch(_app.navigation){case"hamburger":break;default:scope.close();break}}else{scope.open()}}p_event.preventDefault()});this.$button.hover(function(){if(scope.enabled)$(this).addClass("hover")},function(){if(scope.enabled)$(this).removeClass("hover")})},enable:function(){this.$button.removeClass("disabled");this.$panel.removeClass("disabled");this.enabled=true},disable:function(){this.$button.addClass("disabled");this.$panel.addClass("disabled");this.enabled=false},open:function(){var scope=this,slideOpen=function(){},l_activePanel="",l_animation={height:"toggle"};slideOpen=function(){_app.$page.disableFocus();scope.$panels.css("display","block");scope.$panel.addClass("animating");scope.$button.removeClass("btn-closed").addClass("btn-open").attr("title",scope.$button.attr("title").replace("Show","Hide"));switch(_app.navigation){case"left":scope.$button.animate({left:_app.$page.width()-120},scope.speed);l_animation={width:"toggle"};break;case"hamburger":scope.speed=0;break}_app.$blocker.addClass("panel").fadeIn();scope.$panel.animate(l_animation,scope.speed,function(){var $selected=scope.$panel.find(".tab.selected");scope.opened=true;_app.panels.active=scope.id;scope.$panel.addClass("opened").removeAttr("style");scope.$panel.removeClass("closed animating");if(scope.id=="menu"){var $current=$("#"+_app.currentPage.id),$topic=$current.parents(".topic");if($topic.hasClass("open")){$current.focus()}else{$topic.find(".btn-topic").focus()}}else if($selected.length){$selected.focus()}else{scope.$panel.findFirstFocusable().focus()}})};if(empty(_app.panels.active)){slideOpen()}else{l_activePanel=_app.panels.active.replace(/-/g,"_");_app.panels[l_activePanel].close(slideOpen)}_app.pausePlayers()},show:function(){this.$panels.find(".panel").hide();this.$panel.show()},close:function(p_callback){var scope=this,l_animation={height:"toggle"};this.$panel.addClass("animating");scope.$button.removeClass("btn-open").addClass("btn-closed").attr("title",scope.$button.attr("title").replace("Hide","Show"));switch(_app.navigation){case"left":scope.$button.animate({left:0},scope.speed);l_animation={width:"toggle"};break;case"hamburger":scope.speed=0;break}_app.$blocker.removeClass("panel").fadeOut();this.$panel.animate(l_animation,scope.speed,function(){scope.$panels.hide(scope.speed/4,function(){scope.$panel.removeClass("opened animating").addClass("closed").removeAttr("style");scope.opened=false;_app.panels.active="";if(p_callback)p_callback()})});_app.pausePlayers();_app.$page.enableFocus()},hide:function(p_callback){var $btnImage;this.$panel.css("display","none");this.$panels.css("display","none");this.$button.removeClass("btn-open").addClass("btn-closed");$btnImage=scope.$button.find("img");$btnImage.attr("title",$btnImage.attr("title").replace("Hide","Show"));this.$panel.removeClass("opened").addClass("closed").removeAttr("style");this.opened=false;_app.panels.active="";_app.$page.enableFocus();_app.pausePlayers();if(p_callback!=undefined){p_callback()}},setup:function(p_data){}});